# ç”Ÿæˆå™¨

### yieldè¯­å¥
* æ¯æ¬¡è¿”å›ä¸€ä¸ªå€¼ï¼Œæœ‰ç‚¹ç±»ä¼¼äºreturnè¯­å¥
* å†»ç»“æ‰§è¡Œï¼Œç¨‹åºæ¯æ¬¡æ‰§è¡Œåˆ°yieldè¯­å¥å°±ä¼šè¢«æš‚åœ

return è¯­å¥ä¸€æ¬¡è¿”å›æ‰€æœ‰æ•°æ®ï¼Œå‡½æ•°è°ƒç”¨ç»“æŸ;è€Œyieldè¯­å¥åªè¿”å›ä¸€ä¸ªå…ƒç´ æ•°æ®ï¼Œå‡½æ•°è°ƒç”¨ä¸ä¼šç»“æŸï¼Œåªæ˜¯
æš‚åœï¼Œç›´åˆ°__next__()æ–¹æ³•è¢«è°ƒç”¨ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œyieldè¯­å¥ä¹‹åçš„è¯­å¥ä»£ç ã€‚


### å¿«é€Ÿå®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨
```
#!/usr/bin/env python
#-*- coding:utf8 -*-

a=(i for i in range(5))
print(a)
#ç”Ÿæˆå™¨ç”¨æ³•
print(type(a))
print(list(a))
```

#### ä»£ç ç¤ºä¾‹1
```
#!/usr/bin/env python
#-*- coding:utf8 -*-

def myYield(n):
    '''
    å®šä¹‰ä¸€ä¸ªç”Ÿæˆå™¨ï¼ˆ03.å‡½æ•°ï¼‰
    '''
    while n>0:
        print("å¼€å§‹ç”Ÿæˆ......")
        yield n
        print("å®Œæˆä¸€æ¬¡......")
        n -= 1
if __name__ == '__main__':
    for i in myYield(4):
        print("éå†å¾—åˆ°çš„å€¼ï¼š",i)
    print()

    my_yield = myYield(3)      #ç”Ÿæˆä¸€ä¸ªç”Ÿæˆå¯¹è±¡
    print("å·²ç»å®ä¾‹åŒ–ç”Ÿæˆå™¨å¯¹è±¡")
    my_yield.__next__()
    print("ç¬¬äºŒæ¬¡è°ƒç”¨__next__()æ–¹æ³•ï¼š")
    my_yield.__next__()


```

#### ä»£ç ç¤ºä¾‹2
```
#!/usr/bin/env python
#-*- coding:utf8 -*-

def myYield(n):
    '''
    :return:rcvç”¨æ¥æ¥æ”¶è°ƒç”¨è€…ä¼ æ¥çš„å€¼
    '''
    while n >0:
        rcv = yield n       #rcvç”¨æ¥æ¥æ”¶è°ƒç”¨è€…ä¼ æ¥çš„å€¼
        n -=1
        if rcv is not None:
            n = rcv

if __name__ == '__main__':
    my_yield = myYield(3)
    print(my_yield.__next__())
    print(my_yield.__next__())
    print("ä¼ ç»™ç”Ÿæˆå™¨ä¸€ä¸ªå€¼ï¼Œé‡æ–°åˆå§‹åŒ–ç”Ÿæˆå™¨")
    print(my_yield.send(10))
    print(my_yield.__next__())

```
#### ä»£ç ç¤ºä¾‹3
```
#!/usr/bin/env python
#-*- coding:utf8 -*-

#é€šè¿‡ç”Ÿæˆå™¨æ¨å¯¼å¼æ„å»º

def generator():
    print(123)
    content = yield 1
    print("===========",content)
    print(456)
    yield 2

g = generator()
ret = g.__next__()
print("*****",ret)

ret = g.send("hello")
print("****",ret)


print()


def func1():
    print(11)
    print(333)
    yield 222
    print(666)
    yield 777

g_obj = func1()
print(g_obj.__next__())
print(g_obj.__next__())
```

eg

``` 
#!/usr/bin/env python
# -*- coding:utf8 -*-
# auther; 18793
# Dateï¼š2019/5/17 23:21
# filename: ç”Ÿæˆå™¨test.py
def square(num):
    for i in range(1, num + 1):
        yield i * i


# for i in square(5):
#     print(i, end=" ")
hujianli = square(5)
print(hujianli.__next__())
print(hujianli.__next__())
print(hujianli.__next__())
print(hujianli.__next__())
print(hujianli.__next__())
print(hujianli.__next__())
```

    ç”Ÿæˆå™¨å‡½æ•°é€šè¿‡yieldè¿”å›æ•°æ®ï¼Œä¸returnä¸åŒçš„æ˜¯ï¼Œ
    returnè¯­å¥ä¸€æ¬¡è¿”å›æ‰€æœ‰æ•°æ®ï¼Œå‡½æ•°è°ƒç”¨ç»“æŸï¼›
    è€Œyieldè¯­å¥åªè¿”å›ä¸€ä¸ªå…ƒç´ æ•°æ®ï¼Œå‡½æ•°è°ƒç”¨ä¸ä¼šç»“æŸï¼Œåªæ˜¯æš‚åœï¼Œ
    ç›´åˆ°__next__()æ–¹æ³•è¢«è°ƒç”¨ï¼Œç¨‹åºç»§ç»­æ‰§è¡Œyieldè¯­å¥ä¹‹åçš„è¯­å¥ä»£ç 

ç”Ÿæˆå™¨å‡½æ•°åŒæ ·å®ç°äº†ä¸æ™®é€šå‡½æ•°åŒæ ·çš„åŠŸèƒ½ï¼Œå®ƒä»¬æœ‰å¦‚ä¸‹åŒºåˆ«ï¼š
    
    1.ç”Ÿæˆå™¨ä»£ç æ›´ç®€æ´ã€‚(ä»£ç å°‘ï¼Œç»“æ„æ›´ä¸ºç®€æ´)
    2.ç”Ÿæˆå™¨å†…å­˜å ç”¨æå°‘ã€‚(ä¸æ™®é€šå‡½æ•°ç›¸æ¯”ï¼Œæ™®é€šå‡½æ•°é¢ä¸´ä¸¥é‡çš„å†…å­˜é—®é¢˜)
    3.è¿è¡Œæ–¹å¼ä¸åŒã€‚(æ™®é€šå‡½æ•°æ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œç›´åˆ°é‡åˆ°returnè¯­å¥å°±è¿”å›ï¼Œè€Œç”Ÿæˆå™¨å‡½æ•°åˆ™æ˜¯é‡åˆ°yieldè¯­å¥è¿”å›ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ï¼Œä»ä¸Šæ¬¡ç¦»å¼€çš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚)


### ç”Ÿæˆå™¨å’Œåç¨‹
#### ç¤ºä¾‹
```
#!/usr/bin/env python
# -*- coding:utf8 -*-

import time

cake = "ğŸ°"


# ä¸€ä¸ªç®€å•çš„ç”Ÿäº§è€…ä¸æ¶ˆè´¹è€…ç¼–ç¨‹æ¨¡å‹

def consumer():
    print("ç­‰å¾…æ¥æ”¶å¤„ç†ä»»åŠ¡.......")
    while True:
        data = (yield)
        print("æ”¶åˆ° {0}ï¼Œå¼€å§‹å“å° ã€{1}ã€‘ï¼š".format(data, cake))
        time.sleep(0.5)
        print("è›‹ç³•è¢«åƒå®Œäº†........å“ˆå“ˆå“ˆå“ˆå“ˆå—")
        print()


def producer():
    c = consumer()
    c.__next__()
    print("æ¨¡æ‹Ÿç”Ÿäº§è€…æ¨¡å‹")
    for i in range(1, 5):
        time.sleep(1)
        print("å¼€å§‹åˆ¶ä½œç¬¬{0}ä¸ªè›‹ç³•, ã€{1}ã€‘ã€{2}ã€‘åšå¥½äº†.....".format(i, cake, i))
        c.send("è›‹ç³•:ã€%sã€‘" % i)


if __name__ == '__main__':
    producer()

```

è¾“å‡ºä¿¡æ¯:
``` 
ç­‰å¾…æ¥æ”¶å¤„ç†ä»»åŠ¡.......
æ¨¡æ‹Ÿç”Ÿäº§è€…æ¨¡å‹
å¼€å§‹åˆ¶ä½œç¬¬1ä¸ªè›‹ç³•, ã€ğŸ°ã€‘ã€1ã€‘åšå¥½äº†.....
æ”¶åˆ° è›‹ç³•:ã€1ã€‘ï¼Œå¼€å§‹å“å° ã€ğŸ°ã€‘ï¼š
è›‹ç³•è¢«åƒå®Œäº†........å“ˆå“ˆå“ˆå“ˆå“ˆå—

å¼€å§‹åˆ¶ä½œç¬¬2ä¸ªè›‹ç³•, ã€ğŸ°ã€‘ã€2ã€‘åšå¥½äº†.....
æ”¶åˆ° è›‹ç³•:ã€2ã€‘ï¼Œå¼€å§‹å“å° ã€ğŸ°ã€‘ï¼š
è›‹ç³•è¢«åƒå®Œäº†........å“ˆå“ˆå“ˆå“ˆå“ˆå—

å¼€å§‹åˆ¶ä½œç¬¬3ä¸ªè›‹ç³•, ã€ğŸ°ã€‘ã€3ã€‘åšå¥½äº†.....
æ”¶åˆ° è›‹ç³•:ã€3ã€‘ï¼Œå¼€å§‹å“å° ã€ğŸ°ã€‘ï¼š
è›‹ç³•è¢«åƒå®Œäº†........å“ˆå“ˆå“ˆå“ˆå“ˆå—

å¼€å§‹åˆ¶ä½œç¬¬4ä¸ªè›‹ç³•, ã€ğŸ°ã€‘ã€4ã€‘åšå¥½äº†.....
æ”¶åˆ° è›‹ç³•:ã€4ã€‘ï¼Œå¼€å§‹å“å° ã€ğŸ°ã€‘ï¼š
è›‹ç³•è¢«åƒå®Œäº†........å“ˆå“ˆå“ˆå“ˆå“ˆå—

```


### å°½é‡ä½¿ç”¨ç”Ÿæˆå™¨ä»£æ›¿åˆ—è¡¨
``` 
##ä¸æ¨è
def my_range(n):
  i = 0
  result = []
  while i &lt; n:
    result.append(fn(i))
    i += 1
  return result # è¿”å›åˆ—è¡¨
##æ¨è
def my_range(n):
  i = 0
  result = []
  while i &lt; n:
    yield fn(i) # ä½¿ç”¨ç”Ÿæˆå™¨ä»£æ›¿åˆ—è¡¨
    i += 1
*å°½é‡ç”¨ç”Ÿæˆå™¨ä»£æ›¿åˆ—è¡¨ï¼Œé™¤éå¿…é¡»ç”¨åˆ°åˆ—è¡¨ç‰¹æœ‰çš„å‡½æ•°ã€‚
```

