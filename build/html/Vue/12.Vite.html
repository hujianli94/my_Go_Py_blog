<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>12. Vite &mdash; 运维开发修炼之路</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="13. Vue3 实践" href="13.Vue3%E5%AE%9E%E8%B7%B5.html" />
    <link rel="prev" title="11. TypeScript入门" href="11.TypeScript%E5%85%A5%E9%97%A8.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> 小健_Python_go_Devops
            <img src="../_static/python_go.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Go/index.html">Go语言学习</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Go_vs_Python/index.html">Go vs Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Python/index.html">Python全栈系列</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Python%E6%B5%8B%E8%AF%95%E5%BC%80%E5%8F%91%E5%85%A5%E9%97%A8%E4%B8%8E%E5%AE%9E%E8%B7%B5/index.html">Python测试开发入门与实践</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Vue.js企业开发实战</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="01.Vue%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8.html">1. Vue基础入门</a></li>
<li class="toctree-l2"><a class="reference internal" href="02.Vue%E5%86%85%E7%BD%AE%E6%8C%87%E4%BB%A4.html">2. Vue内置指令</a></li>
<li class="toctree-l2"><a class="reference internal" href="03.Vue%E5%AE%9E%E4%BE%8B%E6%A0%B8%E5%BF%83%E9%80%89%E9%A1%B9.html">3. Vue实例核心选项</a></li>
<li class="toctree-l2"><a class="reference internal" href="04.Vue%E5%B7%A5%E7%A8%8B%E5%8C%96%E9%A1%B9%E7%9B%AE.html">4. Vue工程化项目</a></li>
<li class="toctree-l2"><a class="reference internal" href="05.%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3Vue%E7%BB%84%E4%BB%B6.html">5. 深入了解Vue组件</a></li>
<li class="toctree-l2"><a class="reference internal" href="06.Vue-Router%E8%B7%AF%E7%94%B1.html">6. Vue-Router路由</a></li>
<li class="toctree-l2"><a class="reference internal" href="07.Vuex%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86.html">7. Vuex状态管理</a></li>
<li class="toctree-l2"><a class="reference internal" href="08.Vue%E7%9A%84%E5%BC%82%E6%AD%A5%E8%AF%B7%E6%B1%82.html">8. Vue的异步请求</a></li>
<li class="toctree-l2"><a class="reference internal" href="09.%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF%E6%B8%B2%E6%9F%93.html">9. 服务器端渲染</a></li>
<li class="toctree-l2"><a class="reference internal" href="10.Vue3%E6%96%B0%E7%89%B9%E6%80%A7%E8%AF%A6%E8%AE%B2.html">10. Vue3新特性详讲</a></li>
<li class="toctree-l2"><a class="reference internal" href="11.TypeScript%E5%85%A5%E9%97%A8.html">11. TypeScript入门</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">12. Vite</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">12.1. 1.vite创建项目</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vite2">12.2. 2.vite2配置</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#alias">12.2.1. 2.1 alias别名配置</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#setup-script">12.3. 3.setup script语法示例</a></li>
<li class="toctree-l3"><a class="reference internal" href="#vue-router">12.4. 4.加入vue-router</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">12.4.1. 4.1 安装</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">12.4.2. 4.2 创建配置文件</a></li>
<li class="toctree-l4"><a class="reference internal" href="#main-js">12.4.3. 4.3 在 main.js 中引入</a></li>
<li class="toctree-l4"><a class="reference internal" href="#app-vue">12.4.4. 4.4 在App.vue中使用</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#vuex">12.5. 5.加入vuex</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">12.5.1. 5.1 安装vuex</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">12.5.2. 5.3 创建配置文件</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id7">12.5.3. 5.4 在 main.js中引入</a></li>
<li class="toctree-l4"><a class="reference internal" href="#home-vuestore">12.5.4. 5.5 在Home.vue中使用store</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#sass">12.6. 6.加入SASS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">12.6.1. 6.1 安装sass</a></li>
<li class="toctree-l4"><a class="reference internal" href="#normalize-css">12.6.2. 6.2 安装normalize.css初始化样式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#style">12.6.3. 6.3 新建style目录保存各种样式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#index-scss">12.6.4. 6.4 index.scss组织样式</a></li>
<li class="toctree-l4"><a class="reference internal" href="#main-jsindex-scss">12.6.5. 6.5 main.js中引入index.scss</a></li>
<li class="toctree-l4"><a class="reference internal" href="#vite-config-jsscss">12.6.6. 6.6 vite.config.js添加全局scss变量文件</a></li>
<li class="toctree-l4"><a class="reference internal" href="#home-vue">12.6.7. 6.7 Home.vue使用全局变量</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#axios">12.7. 7.加入axios</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">12.7.1. 7.1 安装axios</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">12.7.2. 7.2 封装axios</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">12.7.3. 7.3 开发生产环境变量</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#element-plus">12.8. 8.使用element-plus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id12">12.8.1. 8.1 安装element-plus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lodash">12.8.2. 8.2 安装lodash</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">12.8.3. 8.3 全局引入element-plus(不推荐)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id14">12.8.4. 8.4 手动按需引入element-plus（推荐）</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">12.8.5. 8.5 自动按需引入element-plus（强烈推荐）</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#typescript">12.9. 9.使用typescript</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id19">12.9.1. 9.1 安装typescript</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ts">12.9.2. 9.2 初始化ts配置文件</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id20">12.9.3. 9.3 修改 main.js文件类型</a></li>
<li class="toctree-l4"><a class="reference internal" href="#index-html">12.9.4. 9.4修改index.html引入</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">12.9.5. 9.5 添加类型声明文件</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">12.9.6. 9.6 编写ts测试代码</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id23">12.10. 10.vite.config.js 配置</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id24">12.10.1. 10.1 别名配置</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="13.Vue3%E5%AE%9E%E8%B7%B5.html">13. Vue3 实践</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../Vue_Node.js/index.html">Vue.js+Node.js开发实战</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">小健_Python_go_Devops</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Vue.js企业开发实战</a> &raquo;</li>
      <li><span class="section-number">12. </span>Vite</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/Vue/12.Vite.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#vite" id="id25">Vite</a></p>
<ul>
<li><p><a class="reference internal" href="#id1" id="id26">1.vite创建项目</a></p></li>
<li><p><a class="reference internal" href="#vite2" id="id27">2.vite2配置</a></p>
<ul>
<li><p><a class="reference internal" href="#alias" id="id28">2.1 alias别名配置</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#setup-script" id="id29">3.setup script语法示例</a></p></li>
<li><p><a class="reference internal" href="#vue-router" id="id30">4.加入vue-router</a></p>
<ul>
<li><p><a class="reference internal" href="#id2" id="id31">4.1 安装</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id32">4.2 创建配置文件</a></p></li>
<li><p><a class="reference internal" href="#main-js" id="id33">4.3 在 main.js 中引入</a></p></li>
<li><p><a class="reference internal" href="#app-vue" id="id34">4.4 在App.vue中使用</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#vuex" id="id35">5.加入vuex</a></p>
<ul>
<li><p><a class="reference internal" href="#id4" id="id36">5.1 安装vuex</a></p></li>
<li><p><a class="reference internal" href="#id5" id="id37">5.3 创建配置文件</a></p></li>
<li><p><a class="reference internal" href="#id7" id="id38">5.4 在 main.js中引入</a></p></li>
<li><p><a class="reference internal" href="#home-vuestore" id="id39">5.5 在Home.vue中使用store</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#sass" id="id40">6.加入SASS</a></p>
<ul>
<li><p><a class="reference internal" href="#id8" id="id41">6.1 安装sass</a></p></li>
<li><p><a class="reference internal" href="#normalize-css" id="id42">6.2 安装normalize.css初始化样式</a></p></li>
<li><p><a class="reference internal" href="#style" id="id43">6.3 新建style目录保存各种样式</a></p></li>
<li><p><a class="reference internal" href="#index-scss" id="id44">6.4 index.scss组织样式</a></p></li>
<li><p><a class="reference internal" href="#main-jsindex-scss" id="id45">6.5 main.js中引入index.scss</a></p></li>
<li><p><a class="reference internal" href="#vite-config-jsscss" id="id46">6.6 vite.config.js添加全局scss变量文件</a></p></li>
<li><p><a class="reference internal" href="#home-vue" id="id47">6.7 Home.vue使用全局变量</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#axios" id="id48">7.加入axios</a></p>
<ul>
<li><p><a class="reference internal" href="#id9" id="id49">7.1 安装axios</a></p></li>
<li><p><a class="reference internal" href="#id10" id="id50">7.2 封装axios</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id51">7.3 开发生产环境变量</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#element-plus" id="id52">8.使用element-plus</a></p>
<ul>
<li><p><a class="reference internal" href="#id12" id="id53">8.1 安装element-plus</a></p></li>
<li><p><a class="reference internal" href="#lodash" id="id54">8.2 安装lodash</a></p></li>
<li><p><a class="reference internal" href="#id13" id="id55">8.3 全局引入element-plus(不推荐)</a></p></li>
<li><p><a class="reference internal" href="#id14" id="id56">8.4 手动按需引入element-plus（推荐）</a></p></li>
<li><p><a class="reference internal" href="#id16" id="id57">8.5 自动按需引入element-plus（强烈推荐）</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#typescript" id="id58">9.使用typescript</a></p>
<ul>
<li><p><a class="reference internal" href="#id19" id="id59">9.1 安装typescript</a></p></li>
<li><p><a class="reference internal" href="#ts" id="id60">9.2 初始化ts配置文件</a></p></li>
<li><p><a class="reference internal" href="#id20" id="id61">9.3 修改 main.js文件类型</a></p></li>
<li><p><a class="reference internal" href="#index-html" id="id62">9.4修改index.html引入</a></p></li>
<li><p><a class="reference internal" href="#id21" id="id63">9.5 添加类型声明文件</a></p></li>
<li><p><a class="reference internal" href="#id22" id="id64">9.6 编写ts测试代码</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#id23" id="id65">10.vite.config.js 配置</a></p>
<ul>
<li><p><a class="reference internal" href="#id24" id="id66">10.1 别名配置</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<section id="vite">
<h1><a class="toc-backref" href="#id25"><span class="section-number">12. </span>Vite</a><a class="headerlink" href="#vite" title="Permalink to this headline">¶</a></h1>
<section id="id1">
<h2><a class="toc-backref" href="#id26"><span class="section-number">12.1. </span>1.vite创建项目</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<ol class="arabic simple">
<li><p>创建项目vite项目</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#------------------------ 创建项目vite项目 ------------------------------</span>
<span class="c1"># npm 6.x</span>
<span class="n">npm</span> <span class="n">init</span> <span class="n">vite</span><span class="nd">@latest</span> <span class="n">vue3</span><span class="o">-</span><span class="n">admin</span> <span class="o">--</span><span class="n">template</span> <span class="n">vue</span>

<span class="c1"># npm 7+, 需要额外的双横线：</span>
<span class="n">npm</span> <span class="n">init</span> <span class="n">vite</span><span class="nd">@latest</span> <span class="n">vue3</span><span class="o">-</span><span class="n">admin</span> <span class="o">--</span> <span class="o">--</span><span class="n">template</span> <span class="n">vue</span>

<span class="c1"># yarn</span>
<span class="n">yarn</span> <span class="n">create</span> <span class="n">vite</span> <span class="n">vue3</span><span class="o">-</span><span class="n">admin</span> <span class="o">--</span><span class="n">template</span> <span class="n">vue</span>

<span class="c1"># pnpm</span>
<span class="n">pnpm</span> <span class="n">create</span> <span class="n">vite</span> <span class="n">vue3</span><span class="o">-</span><span class="n">admin</span> <span class="o">--</span> <span class="o">--</span><span class="n">template</span> <span class="n">vue</span>




<span class="c1">#------------------------ vite生成ts项目 ------------------------------</span>
<span class="n">npm</span> <span class="n">init</span> <span class="n">vite</span><span class="nd">@latest</span> <span class="n">my</span><span class="o">-</span><span class="n">vue</span><span class="o">-</span><span class="n">app</span> <span class="o">--</span><span class="n">template</span> <span class="n">vue</span><span class="o">-</span><span class="n">ts</span>

<span class="c1"># npm 7+, 需要额外的双横线：</span>
<span class="n">npm</span> <span class="n">init</span> <span class="n">vite</span><span class="nd">@latest</span> <span class="n">my</span><span class="o">-</span><span class="n">vue</span><span class="o">-</span><span class="n">app</span> <span class="o">--</span> <span class="o">--</span><span class="n">template</span> <span class="n">vue</span><span class="o">-</span><span class="n">ts</span>

<span class="c1"># yarn</span>
<span class="n">yarn</span> <span class="n">create</span> <span class="n">vite</span> <span class="n">my</span><span class="o">-</span><span class="n">vue</span><span class="o">-</span><span class="n">app</span> <span class="o">--</span><span class="n">template</span> <span class="n">vue</span><span class="o">-</span><span class="n">ts</span>

<span class="c1"># pnpm</span>
<span class="n">pnpm</span> <span class="n">create</span> <span class="n">vite</span> <span class="n">my</span><span class="o">-</span><span class="n">vue</span><span class="o">-</span><span class="n">app</span> <span class="o">--</span> <span class="o">--</span><span class="n">template</span> <span class="n">vue</span><span class="o">-</span><span class="n">ts</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>安装依赖并运行项目</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">projectName</span>
<span class="n">npm</span> <span class="n">install</span>
<span class="n">npm</span> <span class="n">run</span> <span class="n">dev</span>
</pre></div>
</div>
<ul class="simple">
<li><p>如果遇到如下报错</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>/Users/cuiliang/coding/myblog_pc/node_modules/esbuild/bin/esbuild:2
throw new Error(`esbuild: Failed to install correctly
^

Error: esbuild: Failed to install correctly

Make sure you don&#39;t have &quot;ignore-scripts&quot; set to true. You can check this with
&quot;npm config get ignore-scripts&quot;. If that returns true you can reset it back to
false using &quot;npm config set ignore-scripts false&quot; and then reinstall esbuild.

If you&#39;re using npm v7, make sure your package-lock.json file contains either
&quot;lockfileVersion&quot;: 1 or the code &quot;hasInstallScript&quot;: true. If it doesn&#39;t have
either of those, then it is likely the case that a known bug in npm v7 has
corrupted your package-lock.json file. Regenerating your package-lock.json file
should fix this issue.
</pre></div>
</div>
<ul class="simple">
<li><p>手动运行 <code class="docutils literal notranslate"><span class="pre">node</span> <span class="pre">node_modules/esbuild/install.js</span></code>
来解决<code class="docutils literal notranslate"><span class="pre">esbuild</span></code>安装问题。</p></li>
</ul>
<ol class="arabic simple">
<li><p>更新vue版本</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">vue</span><span class="nd">@next</span>
</pre></div>
</div>
</section>
<section id="vite2">
<h2><a class="toc-backref" href="#id27"><span class="section-number">12.2. </span>2.vite2配置</a><a class="headerlink" href="#vite2" title="Permalink to this headline">¶</a></h2>
<section id="alias">
<h3><a class="toc-backref" href="#id28"><span class="section-number">12.2.1. </span>2.1 alias别名配置</a><a class="headerlink" href="#alias" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><p>在根目录下vite.config.js文件中添加alias</p></li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span><span class="nx">defineConfig</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vite&#39;</span>
<span class="k">import</span> <span class="nx">vue</span> <span class="nx">from</span> <span class="s1">&#39;@vitejs/plugin-vue&#39;</span>
<span class="k">import</span> <span class="nx">path</span> <span class="nx">from</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
<span class="c1">// https://vitejs.dev/config/</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">defineConfig</span><span class="p">({</span>
    <span class="nx">alias</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;@&#39;</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;src&#39;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">vue</span><span class="p">()]</span>
<span class="p">})</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>使用方法：修改src/App.vue</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="n">setup</span><span class="o">&gt;</span>
<span class="o">//</span> <span class="n">原方式</span>
<span class="o">//</span> <span class="kn">import</span> <span class="nn">HelloWorld</span> <span class="kn">from</span> <span class="s1">&#39;./components/HelloWorld.vue&#39;</span>
<span class="o">//</span> <span class="n">别名引用</span>
<span class="kn">import</span> <span class="nn">HelloWorld</span> <span class="kn">from</span> <span class="s1">&#39;@/components/HelloWorld.vue&#39;</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>如果使用webstorm并不能自动识别别名。需要手动指定webstorm配置文件</p>
<ul class="simple">
<li><p>在项目的根目录新建一个新文件 webstorm.config.js</p></li>
</ul>
</li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;use strict&#39;</span>
<span class="kd">const</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>

<span class="kd">function</span> <span class="nx">resolve</span> <span class="p">(</span><span class="nx">dir</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="nx">dir</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">context</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;./&#39;</span><span class="p">),</span>
    <span class="nx">resolve</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">extensions</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;.js&#39;</span><span class="p">,</span> <span class="s1">&#39;.vue&#39;</span><span class="p">,</span> <span class="s1">&#39;.json&#39;</span><span class="p">],</span>
        <span class="nx">alias</span><span class="o">:</span> <span class="p">{</span>
            <span class="s1">&#39;@&#39;</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">),</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<ul class="simple">
<li><p>进入 WebStorm preferences -&gt; Language &amp; Framework -&gt; JavaScript -&gt;
Webpack，选择这个文件即可</p></li>
</ul>
<img alt="../_images/1626830132374-459420c6-fee9-417b-9f97-7fd54818f677.png" src="../_images/1626830132374-459420c6-fee9-417b-9f97-7fd54818f677.png" />
<ul class="simple">
<li><p>实际开发过程中发现webstorm对script
setup智能提示并不完全适配。预计2021.2版本解决这个问题。参考issue：<a class="reference external" href="https://youtrack.jetbrains.com/issue/WEB-49000">https://youtrack.jetbrains.com/issue/WEB-49000</a></p></li>
</ul>
</section>
</section>
<section id="setup-script">
<h2><a class="toc-backref" href="#id29"><span class="section-number">12.3. </span>3.setup script语法示例</a><a class="headerlink" href="#setup-script" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><p>分别创建src/components/HelloWorld.vue(父组件)和src/components/Test.vue(子组件)。</p>
<p>演示setup script的基本用法</p>
</div></blockquote>
<ol class="arabic simple">
<li><p>HelloWorld.vue(父组件)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;template&gt;
  &lt;h1&gt;这是父组件，名字叫{{ name }}&lt;/h1&gt;
  &lt;button type=&quot;button&quot; @click=&quot;valueAdd&quot;&gt;
    count is: {{ state.count }}
  &lt;/button&gt;
  &lt;hr/&gt;
  &lt;Test msg=&quot;吃了吗？&quot; :status=&quot;state.count%2===0 ? &#39;没吃饭&#39; : &#39;吃饭了&#39;&quot; @toFather=&quot;toFather&quot;/&gt;
&lt;/template&gt;

&lt;script setup&gt;
// 引入组件
import {ref, reactive, onMounted} from &#39;vue&#39;
import Test from &#39;@/components/Test.vue&#39;;
// 定义变量
const name = ref(&#39;张三&#39;)
const state = reactive({count: 0})
// 定义方法
const valueAdd = () =&gt; {
  state.count++
}
// 获取子组件的传值
const toFather = (value) =&gt; {
  alert(&#39;父组件收到子组件的传值:&#39; + value)
}
// 生命周期函数
onMounted(() =&gt; {
  console.log(&quot;执行onMounted函数&quot;)
});
&lt;/script&gt;

&lt;style scoped&gt;
a {
  color: #42b983;
}
&lt;/style&gt;
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Test.vue(子组件)</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;template&gt;
  &lt;h1&gt;这是子组件，名字叫{{ name }}&lt;/h1&gt;
  &lt;p&gt;父组件给子组件传的值是————&gt;{{ msg }}——{{ status }}&lt;/p&gt;
  &lt;button type=&quot;button&quot; @click=&quot;toFather&quot;&gt;
    向父组件传值
  &lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
// 引入组件
import {ref} from &quot;vue&quot;;
// 定义变量
const name = ref(&#39;李四&#39;)
// 组件属性参数(子组件接收父组件传值)
const props = defineProps({
  msg: String,
  // 参数校验与默认值
  status: {
    type: String,
    required: false,
    default: &#39;未定义&#39;,
  },
})
// 定义事件(子组件向父组件传参)
const emit = defineEmit([&#39;toFather&#39;]);
const toFather = () =&gt; {
  emit(&#39;toFather&#39;, &#39;112233&#39;);
}
&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;
</pre></div>
</div>
<p>3.效果演示</p>
<img alt="../_images/image-20220824103020742.png" src="../_images/image-20220824103020742.png" />
</section>
<section id="vue-router">
<h2><a class="toc-backref" href="#id30"><span class="section-number">12.4. </span>4.加入vue-router</a><a class="headerlink" href="#vue-router" title="Permalink to this headline">¶</a></h2>
<section id="id2">
<h3><a class="toc-backref" href="#id31"><span class="section-number">12.4.1. </span>4.1 安装</a><a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">vue</span><span class="o">-</span><span class="n">router</span><span class="o">@</span><span class="mi">4</span> <span class="o">-</span><span class="n">S</span>
</pre></div>
</div>
</section>
<section id="id3">
<h3><a class="toc-backref" href="#id32"><span class="section-number">12.4.2. </span>4.2 创建配置文件</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">src/router/index.js</span></code></p>
<div class="highlight-typescript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span><span class="nx">createRouter</span><span class="p">,</span> <span class="nx">createWebHistory</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue-router&#39;</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">createRouter</span><span class="p">({</span>
    <span class="c1">// history: createWebHashHistory(),     // hash模式，</span>
    <span class="nx">history</span>: <span class="kt">createWebHistory</span><span class="p">(),</span>            <span class="c1">//h5模式createWebHistory</span>
    <span class="nx">routes</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/&#39;</span><span class="p">,</span> <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="s1">&#39;@/views/Home.vue&#39;</span><span class="p">)},</span>
        <span class="p">{</span><span class="nx">path</span><span class="o">:</span> <span class="s1">&#39;/test&#39;</span><span class="p">,</span> <span class="nx">component</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">import</span><span class="p">(</span><span class="s1">&#39;@/views/Test.vue&#39;</span><span class="p">)}</span>
    <span class="p">]</span>
<span class="p">})</span>
<span class="c1">// 路由导航守卫</span>
<span class="c1">// router.beforeEach((to, from, next) =&gt; {</span>
<span class="c1">//  // to 访问的路径 from 从哪来 next 响应路径</span>
<span class="c1">//  if (to.meta.isAuth === true &amp;&amp; JSON.stringify(store.state.userSession) === &#39;{}&#39;) {</span>
<span class="c1">//      Toast.fail(&#39;还未登录，即将跳转至登录页&#39;)</span>
<span class="c1">//      return next(&#39;/login_register&#39;)</span>
<span class="c1">//  } else {</span>
<span class="c1">//      next()</span>
<span class="c1">//  }</span>
<span class="c1">// })</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">router</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="main-js">
<h3><a class="toc-backref" href="#id33"><span class="section-number">12.4.3. </span>4.3 在 main.js 中引入</a><a class="headerlink" href="#main-js" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span><span class="nx">createApp</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
<span class="k">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App.vue&#39;</span>
<span class="k">import</span> <span class="nx">router</span> <span class="nx">from</span> <span class="s1">&#39;@/router&#39;</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">store</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="app-vue">
<h3><a class="toc-backref" href="#id34"><span class="section-number">12.4.4. </span>4.4 在App.vue中使用</a><a class="headerlink" href="#app-vue" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;template&gt;
  &lt;!-- 路由匹配到的组件将渲染在这里 --&gt;
  &lt;router-view&gt;&lt;/router-view&gt;
&lt;/template&gt;

&lt;script setup&gt;
&lt;/script&gt;

&lt;style&gt;
&lt;/style&gt;
</pre></div>
</div>
</section>
</section>
<section id="vuex">
<h2><a class="toc-backref" href="#id35"><span class="section-number">12.5. </span>5.加入vuex</a><a class="headerlink" href="#vuex" title="Permalink to this headline">¶</a></h2>
<section id="id4">
<h3><a class="toc-backref" href="#id36"><span class="section-number">12.5.1. </span>5.1 安装vuex</a><a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">vuex</span><span class="o">@</span><span class="mi">4</span> <span class="o">-</span><span class="n">S</span>
</pre></div>
</div>
<ul class="simple">
<li><p>想要将vuex数据持久化，还需要安装vuex-along</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">vuex</span><span class="o">-</span><span class="n">along</span> <span class="o">-</span><span class="n">S</span>
</pre></div>
</div>
</section>
<section id="id5">
<span id="id6"></span><h3><a class="toc-backref" href="#id37"><span class="section-number">12.5.2. </span>5.3 创建配置文件</a><a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/image-20220824103511545.png" src="../_images/image-20220824103511545.png" />
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src/store/index.js</span></code></p></li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span><span class="nx">createStore</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vuex&#39;</span>
<span class="k">import</span> <span class="nx">mutations</span> <span class="nx">from</span> <span class="s1">&#39;@/store/mutations&#39;</span>
<span class="k">import</span> <span class="nx">state</span> <span class="nx">from</span> <span class="s2">&quot;@/store/state&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">createVuexAlong</span> <span class="nx">from</span> <span class="s1">&#39;vuex-along&#39;</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">createStore</span><span class="p">({</span>
    <span class="nx">state</span><span class="p">,</span>
    <span class="nx">mutations</span><span class="p">,</span>
    <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
        <span class="nx">createVuexAlong</span><span class="p">({</span>
            <span class="nx">local</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">list</span><span class="o">:</span> <span class="p">[],</span>
            <span class="p">},</span>
            <span class="nx">session</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">list</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;count&quot;</span><span class="p">],</span>
            <span class="p">}</span>
        <span class="p">})</span>
    <span class="p">]</span>
<span class="p">})</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><code class="docutils literal notranslate"><span class="pre">src/store/state.js</span></code></p></li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">count</span><span class="o">:</span> <span class="mf">0</span>
<span class="p">}</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">state</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><code class="docutils literal notranslate"><span class="pre">src/store/mutations.js</span></code></p></li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="nx">mutations</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">add</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">state</span><span class="p">.</span><span class="nx">count</span><span class="o">++</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">mutations</span>
</pre></div>
</div>
</section>
<section id="id7">
<h3><a class="toc-backref" href="#id38"><span class="section-number">12.5.3. </span>5.4 在 main.js中引入</a><a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span><span class="nx">createApp</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
<span class="k">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App.vue&#39;</span>
<span class="k">import</span> <span class="nx">router</span> <span class="nx">from</span> <span class="s2">&quot;@/router&quot;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">store</span> <span class="nx">from</span> <span class="s1">&#39;@/store&#39;</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">store</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="home-vuestore">
<h3><a class="toc-backref" href="#id39"><span class="section-number">12.5.4. </span>5.5 在Home.vue中使用store</a><a class="headerlink" href="#home-vuestore" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;template&gt;
  &lt;h1&gt;{{ msg }}&lt;/h1&gt;
  &lt;h1&gt;&lt;/h1&gt;
  &lt;button @click=&quot;$store.commit(&#39;add&#39;)&quot;&gt;count is: {{ $store.state.count }}&lt;/button&gt;
  &lt;p&gt;Edit &lt;code&gt;components/HelloWorld.vue&lt;/code&gt; to test hot module replacement.&lt;/p&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  name: &#39;HelloWorld&#39;,&lt;template&gt;
  &lt;h1&gt;这是首页&lt;/h1&gt;
  &lt;button @click=&quot;valueAdd&quot;&gt;{{ value }}&lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
import store from &#39;@/store/index&#39;
import {computed} from &quot;vue&quot;;

const value = computed(() =&gt; store.state.count)
const valueAdd = () =&gt; {
  store.commit(&#39;add&#39;)
}
&lt;/script&gt;

&lt;style scoped&gt;

&lt;/style&gt;
  props: {
    msg: String
  }
}
&lt;/script&gt;
</pre></div>
</div>
</section>
</section>
<section id="sass">
<h2><a class="toc-backref" href="#id40"><span class="section-number">12.6. </span>6.加入SASS</a><a class="headerlink" href="#sass" title="Permalink to this headline">¶</a></h2>
<section id="id8">
<h3><a class="toc-backref" href="#id41"><span class="section-number">12.6.1. </span>6.1 安装sass</a><a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">sass</span> <span class="o">-</span><span class="n">D</span>
<span class="n">npm</span> <span class="n">install</span> <span class="n">sass</span><span class="o">-</span><span class="n">loader</span> <span class="o">-</span><span class="n">D</span>
<span class="n">npm</span> <span class="n">install</span> <span class="n">node</span><span class="o">-</span><span class="n">sass</span> <span class="o">-</span><span class="n">D</span>
</pre></div>
</div>
</section>
<section id="normalize-css">
<h3><a class="toc-backref" href="#id42"><span class="section-number">12.6.2. </span>6.2 安装normalize.css初始化样式</a><a class="headerlink" href="#normalize-css" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="o">--</span><span class="n">save</span> <span class="n">normalize</span><span class="o">.</span><span class="n">css</span>
</pre></div>
</div>
</section>
<section id="style">
<h3><a class="toc-backref" href="#id43"><span class="section-number">12.6.3. </span>6.3 新建style目录保存各种样式</a><a class="headerlink" href="#style" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/image-20220824104801632.png" src="../_images/image-20220824104801632.png" />
</section>
<section id="index-scss">
<h3><a class="toc-backref" href="#id44"><span class="section-number">12.6.4. </span>6.4 index.scss组织样式</a><a class="headerlink" href="#index-scss" title="Permalink to this headline">¶</a></h3>
<p>并编写全局样式</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>@import &quot;./normalize.css&quot;;
@import &quot;./element-ui.scss&quot;;
@import &quot;./transition.scss&quot;;
@import &quot;./variable.scss&quot;;
@import &quot;./theme.scss&quot;;

body {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  background-color: $color-background-base;
}
</pre></div>
</div>
</section>
<section id="main-jsindex-scss">
<h3><a class="toc-backref" href="#id45"><span class="section-number">12.6.5. </span>6.5 main.js中引入index.scss</a><a class="headerlink" href="#main-jsindex-scss" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span><span class="nx">createApp</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
<span class="k">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App.vue&#39;</span>
<span class="k">import</span> <span class="nx">router</span> <span class="nx">from</span> <span class="s1">&#39;@/router&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">store</span> <span class="nx">from</span> <span class="s1">&#39;@/store&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="s1">&#39;@/assets/style/index.scss&#39;</span>

<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">store</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="vite-config-jsscss">
<h3><a class="toc-backref" href="#id46"><span class="section-number">12.6.6. </span>6.6 vite.config.js添加全局scss变量文件</a><a class="headerlink" href="#vite-config-jsscss" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span><span class="nx">defineConfig</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vite&#39;</span>
<span class="k">import</span> <span class="nx">vue</span> <span class="nx">from</span> <span class="s1">&#39;@vitejs/plugin-vue&#39;</span>
<span class="k">import</span> <span class="nx">path</span> <span class="nx">from</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
<span class="c1">// https://vitejs.dev/config/</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">defineConfig</span><span class="p">({</span>
    <span class="nx">alias</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;@&#39;</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;src&#39;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span><span class="nx">vue</span><span class="p">()],</span>
    <span class="nx">css</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">preprocessorOptions</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">scss</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">additionalData</span><span class="o">:</span> <span class="sb">`@import &quot;@/assets/style/variable.scss&quot;;`</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="home-vue">
<h3><a class="toc-backref" href="#id47"><span class="section-number">12.6.7. </span>6.7 Home.vue使用全局变量</a><a class="headerlink" href="#home-vue" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;template&gt;
  &lt;h1&gt;这是首页&lt;/h1&gt;
  &lt;button @click=&quot;valueAdd&quot;&gt;{{ value }}&lt;/button&gt;
&lt;/template&gt;

&lt;script setup&gt;
import store from &#39;@/store/index&#39;
import {computed} from &quot;vue&quot;;

const value = computed(() =&gt; store.state.count)
const valueAdd = () =&gt; {
  store.commit(&#39;add&#39;)
}
&lt;/script&gt;

&lt;style scoped lang=&quot;scss&quot;&gt;

h1 {
  color: $color-primary;
}
&lt;/style&gt;
</pre></div>
</div>
</section>
</section>
<section id="axios">
<h2><a class="toc-backref" href="#id48"><span class="section-number">12.7. </span>7.加入axios</a><a class="headerlink" href="#axios" title="Permalink to this headline">¶</a></h2>
<section id="id9">
<h3><a class="toc-backref" href="#id49"><span class="section-number">12.7.1. </span>7.1 安装axios</a><a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">i</span> <span class="n">axios</span> <span class="o">-</span><span class="n">D</span>
</pre></div>
</div>
</section>
<section id="id10">
<h3><a class="toc-backref" href="#id50"><span class="section-number">12.7.2. </span>7.2 封装axios</a><a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<img alt="../_images/image-20220824105558841.png" src="../_images/image-20220824105558841.png" />
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">src/api/home.js</span></code></p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">index</span> <span class="kn">from</span> <span class="s1">&#39;./index&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p><code class="docutils literal notranslate"><span class="pre">src/api/index.js</span></code></p></li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span><span class="nx">request</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./request&#39;</span>

<span class="kd">const</span> <span class="nx">index</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">get</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
            <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">key</span> <span class="k">in</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">if</span> <span class="p">(</span><span class="nx">params</span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">length</span> <span class="o">===</span> <span class="mf">0</span><span class="p">)</span> <span class="p">{</span>
                    <span class="k">delete</span> <span class="nx">params</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="nx">config</span><span class="p">.</span><span class="nx">params</span> <span class="o">=</span> <span class="nx">params</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nx">request</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">getFile</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;get&#39;</span><span class="p">,</span>
            <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span><span class="p">,</span>
            <span class="nx">responseType</span><span class="o">:</span> <span class="s1">&#39;blob&#39;</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="nx">config</span><span class="p">.</span><span class="nx">params</span> <span class="o">=</span> <span class="nx">params</span>
        <span class="k">return</span> <span class="nx">request</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">post</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span><span class="p">,</span>
            <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="nx">config</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">params</span>
        <span class="k">return</span> <span class="nx">request</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">put</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;put&#39;</span><span class="p">,</span>
            <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="nx">config</span><span class="p">.</span><span class="nx">data</span> <span class="o">=</span> <span class="nx">params</span>
        <span class="k">return</span> <span class="nx">request</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="k">delete</span><span class="p">(</span><span class="nx">url</span><span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">config</span> <span class="o">=</span> <span class="p">{</span>
            <span class="nx">method</span><span class="o">:</span> <span class="s1">&#39;delete&#39;</span><span class="p">,</span>
            <span class="nx">url</span><span class="o">:</span> <span class="nx">url</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="nx">config</span><span class="p">.</span><span class="nx">params</span> <span class="o">=</span> <span class="nx">params</span>
        <span class="k">return</span> <span class="nx">request</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">index</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p><code class="docutils literal notranslate"><span class="pre">src/api/request.js</span></code></p></li>
</ol>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="nx">axios</span> <span class="nx">from</span> <span class="s1">&#39;axios&#39;</span>

<span class="k">export</span> <span class="kd">function</span> <span class="nx">request</span><span class="p">(</span><span class="nx">config</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// 创建axios的实例</span>
    <span class="kd">const</span> <span class="nx">instance</span> <span class="o">=</span> <span class="nx">axios</span><span class="p">.</span><span class="nx">create</span><span class="p">({</span>
        <span class="nx">baseURL</span><span class="o">:</span> <span class="k">import</span><span class="p">.</span><span class="nx">meta</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">VITE_APP_BASE_URL</span><span class="p">,</span>
        <span class="nx">timeout</span><span class="o">:</span> <span class="mf">20000</span>
    <span class="p">})</span>
    <span class="c1">// 请求拦截器配置</span>
    <span class="nx">instance</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">request</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">config</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="c1">// config.headers.Authorization = window.sessionStorage.getItem(&#39;token&#39;)</span>
            <span class="k">return</span> <span class="nx">config</span>
        <span class="p">},</span> <span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
            <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">)</span>
    <span class="c1">// 响应拦截器配置</span>
    <span class="nx">instance</span><span class="p">.</span><span class="nx">interceptors</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">response</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">response</span><span class="p">.</span><span class="nx">data</span>
    <span class="p">},</span> <span class="nx">error</span> <span class="p">=&gt;</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
        <span class="k">switch</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="mf">400</span><span class="o">:</span>
                <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">response</span><span class="p">.</span><span class="nx">data</span><span class="p">)</span>
            <span class="k">case</span> <span class="mf">401</span><span class="o">:</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;无权访问&quot;</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="k">case</span> <span class="mf">403</span><span class="o">:</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;token过期啦&quot;</span><span class="p">)</span>
        <span class="c1">//window.location.href=&quot;/login&quot;</span>
                <span class="k">break</span>
            <span class="k">case</span> <span class="mf">404</span><span class="o">:</span>
                <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;404啦&quot;</span><span class="p">)</span>
                <span class="k">break</span>
            <span class="k">default</span><span class="o">:</span>
                <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">Promise</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span>
    <span class="p">})</span>
    <span class="c1">// 发送真正的网络请求</span>
    <span class="k">return</span> <span class="nx">instance</span><span class="p">(</span><span class="nx">config</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">export</span> <span class="k">default</span> <span class="nx">request</span>
</pre></div>
</div>
</section>
<section id="id11">
<h3><a class="toc-backref" href="#id51"><span class="section-number">12.7.3. </span>7.3 开发生产环境变量</a><a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>项目开发过程中通常会有好几个环境，比如dev.test.development等模式，往往我们也需要在不同的环境下会有些值对应会变化，最常见的就是后台的接口api,开发环境的api和生产环境的api是不一致的，所以我们需要进行配置,在vite中我们需要进行这样的配置。</p>
<p>参考文档：<a class="reference external" href="https://cn.vitejs.dev/guide/env-and-mode.html#env-files">https://cn.vitejs.dev/guide/env-and-mode.html#env-files</a></p>
</div></blockquote>
<ol class="arabic simple">
<li><p>package.json指定mode</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>{
  &quot;name&quot;: &quot;myblog_pc&quot;,
  &quot;version&quot;: &quot;0.0.0&quot;,
  &quot;scripts&quot;: {
    &quot;dev&quot;: &quot;vite --mode development&quot;,
    &quot;build&quot;: &quot;vite build --mode production&quot;,
    &quot;serve&quot;: &quot;vite preview&quot;
  },
  …………
}
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>项目根目录创建.env.development文件</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ENV</span><span class="o">=</span> <span class="s1">&#39;development&#39;</span>
<span class="n">VITE_APP_TITLE</span> <span class="o">=</span> <span class="s1">&#39;测试环境&#39;</span>
<span class="n">VITE_APP_BASE_URL</span> <span class="o">=</span> <span class="s1">&#39;http://127.0.0.1:8000/&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>项目根目录创建.env.production文件</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ENV</span><span class="o">=</span> <span class="s1">&#39;production&#39;</span>
<span class="n">VITE_APP_TITLE</span> <span class="o">=</span> <span class="s1">&#39;生产环境&#39;</span>
<span class="n">VITE_APP_BASE_URL</span> <span class="o">=</span> <span class="s1">&#39;https://api.cuiliangblog.cn/&#39;</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>src/api/request.js使用环境变量</p></li>
</ol>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">创建axios的实例</span>
    <span class="n">const</span> <span class="n">instance</span> <span class="o">=</span> <span class="n">axios</span><span class="o">.</span><span class="n">create</span><span class="p">({</span>
        <span class="n">baseURL</span><span class="p">:</span> <span class="n">import</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">VITE_APP_BASE_URL</span><span class="p">,</span>
        <span class="n">timeout</span><span class="p">:</span> <span class="mi">20000</span>
    <span class="p">})</span>
</pre></div>
</div>
</section>
</section>
<section id="element-plus">
<h2><a class="toc-backref" href="#id52"><span class="section-number">12.8. </span>8.使用element-plus</a><a class="headerlink" href="#element-plus" title="Permalink to this headline">¶</a></h2>
<section id="id12">
<h3><a class="toc-backref" href="#id53"><span class="section-number">12.8.1. </span>8.1 安装element-plus</a><a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">element</span><span class="o">-</span><span class="n">plus</span> <span class="o">--</span><span class="n">save</span>
</pre></div>
</div>
</section>
<section id="lodash">
<h3><a class="toc-backref" href="#id54"><span class="section-number">12.8.2. </span>8.2 安装lodash</a><a class="headerlink" href="#lodash" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">lodash</span> <span class="o">--</span><span class="n">save</span>
</pre></div>
</div>
</section>
<section id="id13">
<h3><a class="toc-backref" href="#id55"><span class="section-number">12.8.3. </span>8.3 全局引入element-plus(不推荐)</a><a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span><span class="n">createApp</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;vue&#39;</span>
<span class="kn">import</span> <span class="nn">App</span> <span class="kn">from</span> <span class="s1">&#39;./App.vue&#39;</span>
<span class="kn">import</span> <span class="s1">&#39;/style/index.scss&#39;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">router</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./router&#39;</span>
<span class="kn">import</span> <span class="nn">store</span> <span class="kn">from</span> <span class="s1">&#39;./store&#39;</span>
<span class="kn">import</span> <span class="nn">ElementPlus</span> <span class="kn">from</span> <span class="s1">&#39;element-plus&#39;</span>
<span class="kn">import</span> <span class="s1">&#39;element-plus/lib/theme-chalk/index.css&#39;</span>
<span class="n">const</span> <span class="n">app</span> <span class="o">=</span> <span class="n">createApp</span><span class="p">(</span><span class="n">App</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">router</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">ElementPlus</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id14">
<h3><a class="toc-backref" href="#id56"><span class="section-number">12.8.4. </span>8.4 手动按需引入element-plus（推荐）</a><a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<section id="plugins-elementplus-js">
<h4>1. 创建配置文件<code class="docutils literal notranslate"><span class="pre">plugins/ElementPlus.js</span></code><a class="headerlink" href="#plugins-elementplus-js" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span><span class="n">ElButton</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;element-plus&#39;</span>
<span class="kn">import</span> <span class="s1">&#39;element-plus/lib/theme-chalk/el-button.css&#39;</span>

<span class="n">export</span> <span class="n">default</span> <span class="n">function</span> <span class="p">(</span><span class="n">app</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">ElButton</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id15">
<h4>2. main.js引入<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span><span class="n">createApp</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;vue&#39;</span>
<span class="kn">import</span> <span class="nn">App</span> <span class="kn">from</span> <span class="s1">&#39;./App.vue&#39;</span>
<span class="kn">import</span> <span class="s1">&#39;/style/index.scss&#39;</span>
<span class="kn">import</span> <span class="p">{</span><span class="n">router</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;./router&#39;</span>
<span class="kn">import</span> <span class="nn">store</span> <span class="kn">from</span> <span class="s1">&#39;./store&#39;</span>
<span class="kn">import</span> <span class="nn">ElementPlus</span> <span class="kn">from</span> <span class="s1">&#39;./plugins/ElementPlus&#39;</span>
<span class="n">const</span> <span class="n">app</span> <span class="o">=</span> <span class="n">createApp</span><span class="p">(</span><span class="n">App</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">router</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">store</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">ElementPlus</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="id16">
<h3><a class="toc-backref" href="#id57"><span class="section-number">12.8.5. </span>8.5 自动按需引入element-plus（强烈推荐）</a><a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<section id="vite-plugin-style-import">
<h4>1.安装 <a class="reference external" href="https://github.com/anncwb/vite-plugin-style-import">vite-plugin-style-import</a><a class="headerlink" href="#vite-plugin-style-import" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">vite</span><span class="o">-</span><span class="n">plugin</span><span class="o">-</span><span class="n">style</span><span class="o">-</span><span class="kn">import</span> <span class="o">-</span><span class="n">D</span>
</pre></div>
</div>
</section>
<section id="vite-config-js">
<h4>2.修改vite.config.js<a class="headerlink" href="#vite-config-js" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span><span class="nx">defineConfig</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vite&#39;</span>
<span class="k">import</span> <span class="nx">vue</span> <span class="nx">from</span> <span class="s1">&#39;@vitejs/plugin-vue&#39;</span>
<span class="k">import</span> <span class="nx">path</span> <span class="nx">from</span> <span class="s1">&#39;path&#39;</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">styleImport</span> <span class="nx">from</span> <span class="s1">&#39;vite-plugin-style-import&#39;</span>
<span class="c1">// https://vitejs.dev/config/</span>
<span class="k">export</span> <span class="k">default</span> <span class="nx">defineConfig</span><span class="p">({</span>
    <span class="nx">alias</span><span class="o">:</span> <span class="p">{</span>
        <span class="s1">&#39;@&#39;</span><span class="o">:</span> <span class="nx">path</span><span class="p">.</span><span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;src&#39;</span><span class="p">)</span>
    <span class="p">},</span>
    <span class="nx">plugins</span><span class="o">:</span> <span class="p">[</span>
        <span class="nx">vue</span><span class="p">(),</span>
        <span class="nx">styleImport</span><span class="p">({</span>
            <span class="nx">libs</span><span class="o">:</span> <span class="p">[{</span>
                <span class="nx">libraryName</span><span class="o">:</span> <span class="s1">&#39;element-plus&#39;</span><span class="p">,</span>
                <span class="nx">esModule</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">ensureStyleFile</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
                <span class="nx">resolveStyle</span><span class="o">:</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
                    <span class="nx">name</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mf">3</span><span class="p">)</span>
                    <span class="k">return</span> <span class="sb">`element-plus/packages/theme-chalk/src/</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">.scss`</span><span class="p">;</span>
                <span class="p">},</span>
                <span class="nx">resolveComponent</span><span class="o">:</span> <span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
                    <span class="k">return</span> <span class="sb">`element-plus/lib/</span><span class="si">${</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
                <span class="p">},</span>
            <span class="p">}]</span>
        <span class="p">})</span>
    <span class="p">],</span>
    <span class="nx">css</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">preprocessorOptions</span><span class="o">:</span> <span class="p">{</span>
            <span class="nx">scss</span><span class="o">:</span> <span class="p">{</span>
                <span class="nx">additionalData</span><span class="o">:</span> <span class="sb">`@import &quot;@/assets/style/variable.scss&quot;;`</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
</pre></div>
</div>
</section>
<section id="pluginselementplus-js-1">
<span id="id17"></span><h4>3.创建配置文件<code class="docutils literal notranslate"><span class="pre">plugins/ElementPlus.js</span></code><a class="headerlink" href="#pluginselementplus-js-1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="p">{</span><span class="n">ElButton</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;element-plus&#39;</span>

<span class="n">export</span> <span class="n">default</span> <span class="n">function</span> <span class="p">(</span><span class="n">app</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">app</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="n">ElButton</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="main-js-1">
<span id="id18"></span><h4>4.main.js引入<a class="headerlink" href="#main-js-1" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="p">{</span><span class="nx">createApp</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;vue&#39;</span>
<span class="k">import</span> <span class="nx">App</span> <span class="nx">from</span> <span class="s1">&#39;./App.vue&#39;</span>
<span class="k">import</span> <span class="s1">&#39;/style/index.scss&#39;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">router</span><span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;./router&#39;</span>
<span class="k">import</span> <span class="nx">store</span> <span class="nx">from</span> <span class="s1">&#39;./store&#39;</span>
<span class="k">import</span> <span class="nx">ElementPlus</span> <span class="nx">from</span> <span class="s1">&#39;./plugins/ElementPlus&#39;</span>
<span class="kd">const</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">createApp</span><span class="p">(</span><span class="nx">App</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">router</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">store</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">use</span><span class="p">(</span><span class="nx">ElementPlus</span><span class="p">)</span>
<span class="nx">app</span><span class="p">.</span><span class="nx">mount</span><span class="p">(</span><span class="s1">&#39;#app&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="src-views-home-vue">
<h4>5. <code class="docutils literal notranslate"><span class="pre">src/views/Home.vue</span></code>使用<a class="headerlink" href="#src-views-home-vue" title="Permalink to this headline">¶</a></h4>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>&lt;template&gt;
  &lt;h1&gt;这是首页&lt;/h1&gt;
  &lt;button @click=&quot;valueAdd&quot;&gt;{{ value }}&lt;/button&gt;
  &lt;el-button type=&quot;primary&quot;&gt;主要按钮&lt;/el-button&gt;
&lt;/template&gt;

&lt;script setup&gt;
import store from &#39;@/store/index&#39;
import {computed} from &quot;vue&quot;;

const value = computed(() =&gt; store.state.count)
const valueAdd = () =&gt; {
  store.commit(&#39;add&#39;)
}
&lt;/script&gt;

&lt;style scoped lang=&quot;scss&quot;&gt;

h1 {
  color: $color-primary;
}
&lt;/style&gt;
</pre></div>
</div>
</section>
</section>
</section>
<section id="typescript">
<h2><a class="toc-backref" href="#id58"><span class="section-number">12.9. </span>9.使用typescript</a><a class="headerlink" href="#typescript" title="Permalink to this headline">¶</a></h2>
<section id="id19">
<h3><a class="toc-backref" href="#id59"><span class="section-number">12.9.1. </span>9.1 安装typescript</a><a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">npm</span> <span class="n">install</span> <span class="n">typescript</span>
</pre></div>
</div>
</section>
<section id="ts">
<h3><a class="toc-backref" href="#id60"><span class="section-number">12.9.2. </span>9.2 初始化ts配置文件</a><a class="headerlink" href="#ts" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">tsc</span> <span class="o">-</span><span class="n">init</span>
</pre></div>
</div>
<p>然后将<code class="docutils literal notranslate"><span class="pre">tsconfig.json</span></code>中的“strict”改为false</p>
</section>
<section id="id20">
<h3><a class="toc-backref" href="#id61"><span class="section-number">12.9.3. </span>9.3 修改 main.js文件类型</a><a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h3>
<p>将 <code class="docutils literal notranslate"><span class="pre">main.js</span></code> 改为 <code class="docutils literal notranslate"><span class="pre">main.ts</span></code></p>
</section>
<section id="index-html">
<h3><a class="toc-backref" href="#id62"><span class="section-number">12.9.4. </span>9.4修改index.html引入</a><a class="headerlink" href="#index-html" title="Permalink to this headline">¶</a></h3>
<p>将 <code class="docutils literal notranslate"><span class="pre">index.html</span></code> 中引入的 <code class="docutils literal notranslate"><span class="pre">main.js</span></code> 改为 <code class="docutils literal notranslate"><span class="pre">main.ts</span></code>。</p>
</section>
<section id="id21">
<h3><a class="toc-backref" href="#id63"><span class="section-number">12.9.5. </span>9.5 添加类型声明文件</a><a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h3>
<p>ts只认识以<code class="docutils literal notranslate"><span class="pre">.ts</span></code>结尾的文件，并不认识<code class="docutils literal notranslate"><span class="pre">.vue</span></code>结尾的文件，因此要在项目的<code class="docutils literal notranslate"><span class="pre">/src</span></code>文件下创建一个<code class="docutils literal notranslate"><span class="pre">.d.ts</span></code>文件来定义一下<code class="docutils literal notranslate"><span class="pre">.vue</span></code>文件：</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">src</span><span class="o">/</span><span class="n">main</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">ts</span>
<span class="n">declare</span> <span class="n">module</span> <span class="s1">&#39;*.vue&#39;</span> <span class="p">{</span>
    <span class="kn">import</span> <span class="p">{</span><span class="n">ComponentOptions</span><span class="p">}</span> <span class="kn">from</span> <span class="s1">&#39;vue&#39;</span><span class="p">;</span>
    <span class="n">const</span> <span class="n">componentOptions</span><span class="p">:</span> <span class="n">ComponentOptions</span><span class="p">;</span>
    <span class="n">export</span> <span class="n">default</span> <span class="n">componentOptions</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id22">
<h3><a class="toc-backref" href="#id64"><span class="section-number">12.9.6. </span>9.6 编写ts测试代码</a><a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h3>
<p>现在就可以 <code class="docutils literal notranslate"><span class="pre">app.vue</span></code> 中使用 TypeScript</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&lt;</span><span class="n">script</span> <span class="n">lang</span><span class="o">=</span><span class="s2">&quot;ts&quot;</span><span class="o">&gt;</span>
<span class="kn">import</span> <span class="nn">HelloWorld</span> <span class="kn">from</span> <span class="s1">&#39;./components/HelloWorld.vue&#39;</span>

<span class="n">export</span> <span class="n">default</span> <span class="p">{</span>
  <span class="n">name</span><span class="p">:</span> <span class="s1">&#39;App&#39;</span><span class="p">,</span>
  <span class="n">components</span><span class="p">:</span> <span class="p">{</span>
    <span class="n">HelloWorld</span>
  <span class="p">},</span>
  <span class="n">setup</span><span class="p">(){</span>
    <span class="n">const</span> <span class="n">msg</span><span class="p">:</span><span class="n">string</span> <span class="o">=</span> <span class="s1">&#39;hello&#39;</span>
    <span class="n">alert</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>
<span class="o">&lt;/</span><span class="n">script</span><span class="o">&gt;</span>
</pre></div>
</div>
</section>
</section>
<section id="id23">
<h2><a class="toc-backref" href="#id65"><span class="section-number">12.10. </span>10.vite.config.js 配置</a><a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h2>
<section id="id24">
<h3><a class="toc-backref" href="#id66"><span class="section-number">12.10.1. </span>10.1 别名配置</a><a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h3>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">const</span> <span class="p">{</span><span class="nx">resolve</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">)</span>
<span class="k">export</span> <span class="k">default</span> <span class="p">{</span>
  <span class="nx">alias</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">&#39;/@/&#39;</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s1">&#39;src&#39;</span><span class="p">),</span>
    <span class="s1">&#39;/components/&#39;</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&quot;src/components&quot;</span><span class="p">),</span>
    <span class="s1">&#39;/style/&#39;</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&quot;src/assets/style&quot;</span><span class="p">),</span>
    <span class="s1">&#39;/images/&#39;</span><span class="o">:</span> <span class="nx">resolve</span><span class="p">(</span><span class="nx">__dirname</span><span class="p">,</span> <span class="s2">&quot;src/assets/images&quot;</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">//使用</span>
<span class="k">import</span> <span class="nx">HelloWorld</span> <span class="nx">from</span> <span class="s1">&#39;/components/HelloWorld.vue&#39;</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="11.TypeScript%E5%85%A5%E9%97%A8.html" class="btn btn-neutral float-left" title="11. TypeScript入门" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="13.Vue3%E5%AE%9E%E8%B7%B5.html" class="btn btn-neutral float-right" title="13. Vue3 实践" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2019, huxiaojian.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>